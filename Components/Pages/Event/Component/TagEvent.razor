@page "/Event/Component/EachTag"
<PageTitle>可关闭的tag group</PageTitle>
<Amis Data="GetObj()"></Amis>

@code {

    private object GetObj()
    {
        var data = new
        {
            type = "service",
            api = "/api/mock/Sample",
            id = "service-reload",
            body = new object[]
            {
                new
                {
                    type = "each",
                    name = "rows",
                    items = new
                    {
                        type = "tag",
                        label = "${id}",
                        closable = true,
                        onEvent = new
                        {
                            close = new
                            {
                                actions = new object[]
                                {
                                    new
                                    {
                                        actionType = "ajax",
                                        args = new
                                        {
                                            api = new
                                            {
                                                url = "/api/mock/Sample/${event.data.label}",
                                                method = "DELETE"
                                            },
                                            messages = new
                                            {
                                                success = "${label} 删除成功",
                                                failed = "删除失败"
                                            }
                                        }
                                    },
                                    new
                                    {
                                        actionType = "reload",
                                        componentId = "service-reload"
                                    }
                                }
                            }
                        }
                    }
                }
            }
        };
        return data;
    }

}
