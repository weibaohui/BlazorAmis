@page "/Event/Component/Form"
<PageTitle>Demo</PageTitle>
<Amis Data="GetObj()"></Amis>

@code {

    private object GetObj()
    {
        var data = new
        {
            type = "page",
            title = "form组件支持动作示例",
            regions = new object[] { "body", "toolbar", "header" },
            body = new object[]
            {
                new
                {
                    type = "action",
                    label = "清空表单",
                    level = "primary",
                    className = "mr-3 mb-3",
                    onEvent = new
                    {
                        click = new
                        {
                            actions = new object[]
                            {
                                new
                                {
                                    componentId = "form-action-receiver",
                                    actionType = "clear"
                                }
                            }
                        }
                    }
                },
                new
                {
                    type = "action",
                    label = "重置表单",
                    level = "primary",
                    className = "mr-3 mb-3",
                    onEvent = new
                    {
                        click = new
                        {
                            actions = new object[]
                            {
                                new
                                {
                                    actionType = "reset",
                                    componentId = "form-action-receiver"
                                }
                            }
                        }
                    }
                },
                new
                {
                    type = "action",
                    label = "校验表单",
                    level = "primary",
                    className = "mr-3 mb-3",
                    onEvent = new
                    {
                        click = new
                        {
                            actions = new object[]
                            {
                                new
                                {
                                    actionType = "validate",
                                    componentId = "form-action-receiver"
                                }
                            }
                        }
                    }
                },
                new
                {
                    type = "action",
                    label = "重新加载表单组件",
                    level = "primary",
                    className = "mr-3 mb-3",
                    onEvent = new
                    {
                        click = new
                        {
                            actions = new object[]
                            {
                                new
                                {
                                    actionType = "reload",
                                    componentId = "form-action-receiver"
                                }
                            }
                        }
                    }
                },
                new
                {
                    type = "action",
                    label = "提交表单",
                    level = "primary",
                    className = "mr-3 mb-3",
                    onEvent = new
                    {
                        click = new
                        {
                            actions = new object[]
                            {
                                new
                                {
                                    actionType = "submit",
                                    componentId = "form-action-receiver"
                                }
                            }
                        }
                    }
                },
                new
                {
                    type = "action",
                    label = "将第一个表单中的姓名赋值给下面的输入框（我的名称）",
                    level = "primary",
                    className = "mr-3 mb-3",
                    onEvent = new
                    {
                        click = new
                        {
                            actions = new object[]
                            {
                                new
                                {
                                    actionType = "setValue",
                                    componentId = "u:text_001",
                                    args = new
                                    {
                                        value = "${GETRENDERERDATA(\"form-action-receiver\", \"name\")}"
                                    }
                                }
                            }
                        }
                    }
                },
                new
                {
                    type = "input-text",
                    name = "name",
                    label = "我的姓名",
                    className = "mt-3",
                    mode = "horizontal",
                    id = "u:text_001"
                },
                new
                {
                    name = "form-action-receiver",
                    id = "form-action-receiver",
                    title = "表单：用于接收上面按钮的动作，派发form本身的事件",
                    type = "form",
                    debug = true,
                    api = "https://3xsw4ap8wah59.cfc-execute.bj.baidubce.com/api/amis-mock/mock2/form/saveForm",
                    data = new
                    {
                        data1 = "初始化数据1",
                        data2 = "初始化数据2"
                    },
                    initApi = "https://3xsw4ap8wah59.cfc-execute.bj.baidubce.com/api/amis-mock/mock2/form/initData",
                    body = new object[]
                    {
                        new
                        {
                            type = "input-text",
                            name = "name",
                            label = "姓名",
                            required = true,
                            validateOnChange = true
                        },
                        new
                        {
                            type = "input-text",
                            name = "email",
                            label = "邮箱",
                            required = true,
                            validateOnChange = true,
                            validations = new
                            {
                                isEmail = true
                            }
                        }
                    },
                    onEvent = new
                    {
                        change = new
                        {
                            actions = new object[]
                            {
                                new
                                {
                                    actionType = "toast",
                                    args = new
                                    {
                                        msg = "表单值变化：${event.data|json}"
                                    }
                                }
                            }
                        },
                        inited = new
                        {
                            actions = new object[]
                            {
                                new
                                {
                                    actionType = "toast",
                                    args = new
                                    {
                                        msg = "表单初始化完成：${event.data|json}"
                                    }
                                }
                            }
                        },
                        formItemValidateSucc = new
                        {
                            actions = new object[]
                            {
                                new
                                {
                                    actionType = "toast",
                                    args = new
                                    {
                                        msg = "表单项校验成功：${event.data|json}"
                                    }
                                }
                            }
                        },
                        formItemValidateError = new
                        {
                            actions = new object[]
                            {
                                new
                                {
                                    actionType = "toast",
                                    args = new
                                    {
                                        msg = "表单项校验失败：${event.data|json}"
                                    }
                                }
                            }
                        },
                        validateSucc = new
                        {
                            actions = new object[]
                            {
                                new
                                {
                                    actionType = "toast",
                                    args = new
                                    {
                                        msg = "表单校验成功：${event.data|json}"
                                    }
                                }
                            }
                        },
                        validateError = new
                        {
                            actions = new object[]
                            {
                                new
                                {
                                    actionType = "toast",
                                    args = new
                                    {
                                        msg = "表单校验失败：${event.data|json}"
                                    }
                                }
                            }
                        },
                        submitSucc = new
                        {
                            actions = new object[]
                            {
                                new
                                {
                                    actionType = "toast",
                                    args = new
                                    {
                                        msg = "提交失败：${event.data|json}"
                                    }
                                }
                            }
                        }
                    }
                },
                new
                {
                    type = "form",
                    debug = true,
                    api = "https://3xsw4ap8wah59.cfc-execute.bj.baidubce.com/api/amis-mock/mock2/form/saveForm",
                    title = "表单：派发formItem的校验事件",
                    data = new
                    {
                        data1 = "初始化数据1",
                        data2 = "初始化数据2"
                    },
                    initApi = "https://3xsw4ap8wah59.cfc-execute.bj.baidubce.com/api/amis-mock/mock2/form/initData",
                    body = new object[]
                    {
                        new
                        {
                            type = "input-text",
                            name = "name",
                            label = "姓名",
                            required = true,
                            validateOnChange = true
                        },
                        new
                        {
                            type = "input-text",
                            name = "email",
                            label = "邮箱",
                            required = true,
                            validateOnChange = true,
                            validations = new
                            {
                                isEmail = true
                            }
                        }
                    },
                    onEvent = new
                    {
                        formItemValidateSucc = new
                        {
                            actions = new object[]
                            {
                                new
                                {
                                    actionType = "toast",
                                    args = new
                                    {
                                        msg = "表单项校验成功：${event.data|json}"
                                    }
                                }
                            }
                        },
                        formItemValidateError = new
                        {
                            actions = new object[]
                            {
                                new
                                {
                                    actionType = "toast",
                                    args = new
                                    {
                                        msg = "表单项校验失败：${event.data|json}"
                                    }
                                }
                            }
                        }
                    }
                },
                new
                {
                    type = "form",
                    debug = true,
                    title = "表单：提交表单无target，无api，只触发提交成功事件",
                    body = new object[]
                    {
                        new
                        {
                            type = "input-text",
                            name = "name",
                            label = "姓名",
                            required = true,
                            validateOnChange = true
                        },
                        new
                        {
                            type = "input-text",
                            name = "email",
                            label = "邮箱",
                            required = true,
                            validateOnChange = true,
                            validations = new
                            {
                                isEmail = true
                            }
                        }
                    },
                    onEvent = new
                    {
                        submitSucc = new
                        {
                            actions = new object[]
                            {
                                new
                                {
                                    actionType = "toast",
                                    args = new
                                    {
                                        msg = "提交成功：${event.data|json}"
                                    }
                                }
                            }
                        }
                    }
                },
                new
                {
                    type = "form",
                    debug = true,
                    api = "https://3xsw4ap8wah59.cfc-execute.bj.baidubce.com/api/amis-mock/mock2/form/saveForm",
                    title = "表单：配置submit事件后，点击提交按钮或者触发表单提交动作时将不会触发表单校验、提交到api或者target等行为，所有行为需要自己配置",
                    body = new object[]
                    {
                        new
                        {
                            type = "input-text",
                            name = "name",
                            label = "姓名",
                            required = true,
                            validateOnChange = true
                        },
                        new
                        {
                            type = "input-text",
                            name = "email",
                            label = "邮箱",
                            required = true,
                            validateOnChange = true,
                            validations = new
                            {
                                isEmail = true
                            }
                        }
                    },
                    onEvent = new
                    {
                        submit = new
                        {
                            actions = new object[]
                            {
                                new
                                {
                                    actionType = "toast",
                                    args = new
                                    {
                                        msg = "提交成功：${event.data|json}"
                                    }
                                }
                            }
                        }
                    }
                }
            }
        };
        return data;
    }

}
