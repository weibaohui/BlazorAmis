@page "/Event/Component/Service"
<PageTitle>ServiceÂäüËÉΩÂûãÂÆπÂô®</PageTitle>
<Amis Data="GetObj()"></Amis>

@code {

    private object GetObj()
    {
        var data = new
        {
            type = "page",
            title = "ServiceÂäüËÉΩÂûãÂÆπÂô®",
            regions = new object[] { "body", "toolbar", "header" },
            body = new object[]
            {
                new
                {
                    type = "tpl",
                    tpl = "‰∫ã‰ª∂",
                    inline = false,
                    wrapperComponent = "h2"
                },
                new
                {
                    type = "tpl",
                    tpl = "<code>fetchInited</code> ‰∫ã‰ª∂",
                    inline = false,
                    wrapperComponent = "h3"
                },
                new
                {
                    type = "action",
                    level = "success",
                    label = "fetchInited",
                    actionType = "dialog",
                    dialog = new
                    {
                        title = "fetchInited",
                        body = new object[]
                        {
                            new
                            {
                                type = "service",
                                name = "service-api",
                                api = "/api/mock/page/initData",
                                body = new
                                {
                                    type = "panel",
                                    title = "$title",
                                    body = "Áé∞Âú®ÊòØÔºö${date}"
                                },
                                onEvent = new
                                {
                                    fetchInited = new
                                    {
                                        actions = new object[]
                                        {
                                            new
                                            {
                                                actionType = "toast",
                                                expression = "${!__response.error}",
                                                args = new
                                                {
                                                    msgType = "success",
                                                    msg = "API inited: <b>${date}</b>"
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                new
                {
                    type = "divider"
                },
                new
                {
                    type = "tpl",
                    tpl = "ÂØπ‰∫éamisÁöÑÊé•Âè£Ê†áÂáÜÊù•ËØ¥, status‰∏ç‰∏∫0, ÂàôËßÜ‰∏∫ËØ∑Ê±ÇÂ§±Ë¥•. ËØ•‰∫ã‰ª∂È¢ùÂ§ñÊèê‰æõ‰∫Ü<code>__response</code>ÂèÇÊï∞Áî®‰∫éÂå∫ÂàÜÊé•Âè£Áä∂ÊÄÅÁ†ÅÂÆûÈôÖÊòØ200ÊàêÂäü, ‰ΩÜÊé•Âè£‰∏≠ÁöÑstatusÂ≠óÊÆµ‰∏ç‰∏∫0ÁöÑÊÉÖÂÜµ(Êé•Âè£Áä∂ÊÄÅÁ†ÅÂ¶ÇÊûú‰∏∫Èùû200, Âàô‰∏ç‰ºöËß¶ÂèëËØ•‰∫ã‰ª∂)",
                    inline = false
                },
                new
                {
                    type = "action",
                    level = "danger",
                    label = "fetchInited(failed)",
                    actionType = "dialog",
                    dialog = new
                    {
                        title = "fetchInited(failed)",
                        body = new object[]
                        {
                            new
                            {
                                type = "service",
                                name = "service-api",
                                id = "service-failed",
                                api = "/api/mock/service/fail",
                                body = new
                                {
                                    type = "panel",
                                    title = "$title",
                                    body = new object[]
                                    {
                                        new
                                        {
                                            type = "tpl",
                                            tpl = "<strong>toastÊ∂àÊÅØÊèêÁ§∫ËÆæÁΩÆ‰∫ÜËß¶ÂèëÊù°‰ª∂, ÂΩìÊé•Âè£Â§±Ë¥•Êó∂‰∏çÊòæÁ§∫toast, ÊâÄ‰ª•ÁªìÊûúÂè™‰ºöÊúâ1‰∏™ÂÖ®Â±ÄÈªòËÆ§ÁöÑtoast, Â¶ÇÊûú‰∏çËÆæÁΩÆÊù°‰ª∂Âàô‰ºöÂºπÂá∫2‰∏™toast.</strong>",
                                            inline = false
                                        },
                                        new
                                        {
                                            type = "tpl",
                                            tpl = "ÈîôËØØ‰ø°ÊÅØÊòØ: ${__response.msg}",
                                            inline = false
                                        }
                                    }
                                },
                                onEvent = new
                                {
                                    fetchInited = new
                                    {
                                        actions = new object[]
                                        {
                                            new
                                            {
                                                actionType = "setValue",
                                                args = new
                                                {
                                                    value = "${event.data}"
                                                }
                                            },
                                            new
                                            {
                                                actionType = "toast",
                                                expression = "${!__response.error}",
                                                args = new
                                                {
                                                    msgType = "success",
                                                    msg = "API inited: <b>${date}</b>"
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                new
                {
                    type = "divider"
                },
                new
                {
                    type = "tpl",
                    tpl = "<code>fetchSchemaInited</code> ‰∫ã‰ª∂",
                    inline = false,
                    wrapperComponent = "h3"
                },
                new
                {
                    type = "action",
                    level = "info",
                    label = "fetchSchemaInited",
                    actionType = "dialog",
                    dialog = new
                    {
                        title = "fetchSchemaInited",
                        body = new object[]
                        {
                            new
                            {
                                type = "service",
                                name = "service-schema-api",
                                schemaApi = "https://3xsw4ap8wah59.cfc-execute.bj.baidubce.com/api/amis-mock/mock2/service/schema?type=form",
                                onEvent = new
                                {
                                    fetchSchemaInited = new
                                    {
                                        actions = new object[]
                                        {
                                            new
                                            {
                                                actionType = "toast",
                                                args = new
                                                {
                                                    msgType = "info",
                                                    msg = "SchemaAPI inited: <b>title: ${title}</b>"
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                new
                {
                    type = "divider"
                },
                new
                {
                    type = "tpl",
                    tpl = "Âä®‰Ωú",
                    inline = false,
                    wrapperComponent = "h2"
                },
                new
                {
                    type = "tpl",
                    tpl = "<code>reload</code> Âä®‰Ωú",
                    inline = false,
                    wrapperComponent = "h3"
                },
                new
                {
                    type = "action",
                    label = "reloadËß¶ÂèëÂô®",
                    level = "primary",
                    className = "mb-3",
                    onEvent = new
                    {
                        click = new
                        {
                            actions = new object[]
                            {
                                new
                                {
                                    actionType = "reload",
                                    componentId = "service-reload"
                                }
                            }
                        }
                    }
                },
                new
                {
                    type = "service",
                    id = "service-reload",
                    name = "service-reload",
                    api = "/api/mock/number/random",
                    body = new
                    {
                        type = "panel",
                        title = "reloadÂä®‰Ωú",
                        body = "Áé∞Âú®ÊòØÔºö${random}"
                    }
                },
                new
                {
                    type = "divider"
                },
                new
                {
                    type = "tpl",
                    tpl = "<code>rebuild</code> Âä®‰Ωú",
                    inline = false,
                    wrapperComponent = "h3"
                },
                new
                {
                    type = "alert",
                    body = "ËØ∑ÈÄâÊã©‰∏ÄÁßçÊûÑÂª∫ÊñπÂºèÁîüÊàêÁªÑ‰ª∂",
                    level = "info",
                    showIcon = true,
                    className = "mb-3",
                    visibleOn = "this.schemaType == null"
                },
                new
                {
                    type = "button-group",
                    tiled = true,
                    className = "mb-3",
                    buttons = new object[]
                    {
                        new
                        {
                            type = "action",
                            label = "ÊûÑÂª∫form",
                            icon = "fa fa-hammer",
                            onEvent = new
                            {
                                click = new
                                {
                                    actions = new object[]
                                    {
                                        new
                                        {
                                            actionType = "rebuild",
                                            componentId = "service-rebuild",
                                            args = new
                                            {
                                                schemaType = "form"
                                            }
                                        }
                                    }
                                }
                            }
                        },
                        new
                        {
                            type = "action",
                            label = "ÊûÑÂª∫tabs",
                            icon = "fa fa-hammer",
                            onEvent = new
                            {
                                click = new
                                {
                                    actions = new object[]
                                    {
                                        new
                                        {
                                            actionType = "rebuild",
                                            componentId = "service-rebuild",
                                            args = new
                                            {
                                                schemaType = "tabs"
                                            }
                                        }
                                    }
                                }
                            }
                        },
                        new
                        {
                            type = "action",
                            label = "ÊûÑÂª∫crud",
                            icon = "fa fa-hammer",
                            onEvent = new
                            {
                                click = new
                                {
                                    actions = new object[]
                                    {
                                        new
                                        {
                                            actionType = "rebuild",
                                            componentId = "service-rebuild",
                                            args = new
                                            {
                                                schemaType = "crud"
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                new
                {
                    type = "service",
                    id = "service-rebuild",
                    name = "service-rebuild",
                    schemaApi = new
                    {
                        url = "https://3xsw4ap8wah59.cfc-execute.bj.baidubce.com/api/amis-mock/mock2/service/schema?type=${schemaType}",
                        method = "post",
                        sendOn = "this.schemaType != null"
                    }
                },
                new
                {
                    type = "divider"
                },
                new
                {
                    type = "tpl",
                    tpl = "<code>setValue</code> Âä®‰Ωú",
                    inline = false,
                    wrapperComponent = "h3"
                },
                new
                {
                    type = "action",
                    label = "setValueËß¶ÂèëÂô®",
                    level = "primary",
                    className = "mb-3",
                    onEvent = new
                    {
                        click = new
                        {
                            actions = new object[]
                            {
                                new
                                {
                                    actionType = "setValue",
                                    componentId = "service-setvalue",
                                    args = new
                                    {
                                        value = new
                                        {
                                            language = new object[] { "üá®üá≥ ‰∏≠ÂõΩ" }
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                new
                {
                    type = "service",
                    id = "service-setvalue",
                    name = "service-setvalue",
                    data = new
                    {
                        language = new object[] { "üá∫üá∏ ÁæéÂõΩ" }
                    },
                    body = new
                    {
                        type = "panel",
                        title = "setValueÂä®‰Ωú",
                        body = new object[]
                        {
                            new
                            {
                                type = "each",
                                name = "language",
                                items = new
                                {
                                    type = "tpl",
                                    tpl = "<span class='label label-default m-l-sm'><%= data.item %></span> "
                                }
                            }
                        }
                    }
                }
            }
        };
        return data;
    }

}
