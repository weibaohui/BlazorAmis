@page "/Linkpage/CRUD"
<PageTitle>表单和列表联动</PageTitle>
<Amis Data="GetObj()"></Amis>

@code {

    private object GetObj()
    {
        var data = new
        {
            title = "表单与列表之间的联动",
            body = new object[]
            {
                new
                {
                    title = "",
                    type = "form",
                    mode = "inline",
                    target = "list",
                    wrapWithPanel = false,
                    className = "m-b",
                    body = new object[]
                    {
                        new
                        {
                            type = "input-text",
                            name = "keywords",
                            placeholder = "通过关键字搜索",
                            clearable = true,
                            addOn = new
                            {
                                type = "submit",
                                icon = "fa fa-search",
                                level = "primary"
                            }
                        }
                    }
                },
                new
                {
                    type = "crud",
                    name = "list",
                    api = "https://3xsw4ap8wah59.cfc-execute.bj.baidubce.com/api/amis-mock/sample",
                    mode = "list",
                    listItem = new
                    {
                        actions = new object[]
                        {
                            new
                            {
                                type = "button",
                                icon = "fa fa-eye",
                                actionType = "dialog",
                                dialog = new
                                {
                                    title = "查看",
                                    body = new
                                    {
                                        type = "form",
                                        body = new object[]
                                        {
                                            new
                                            {
                                                type = "static",
                                                name = "engine",
                                                label = "Engine"
                                            },
                                            new
                                            {
                                                type = "divider"
                                            },
                                            new
                                            {
                                                type = "static",
                                                name = "browser",
                                                label = "Browser"
                                            },
                                            new
                                            {
                                                type = "divider"
                                            },
                                            new
                                            {
                                                type = "static",
                                                name = "platform",
                                                label = "Platform(s)"
                                            },
                                            new
                                            {
                                                type = "divider"
                                            },
                                            new
                                            {
                                                type = "static",
                                                name = "version",
                                                label = "Engine version"
                                            },
                                            new
                                            {
                                                type = "divider"
                                            },
                                            new
                                            {
                                                type = "static",
                                                name = "grade",
                                                label = "CSS grade"
                                            }
                                        }
                                    }
                                }
                            },
                            new
                            {
                                type = "button",
                                icon = "fa fa-pencil",
                                actionType = "dialog",
                                dialog = new
                                {
                                    title = "编辑",
                                    body = new
                                    {
                                        type = "form",
                                        name = "sample-edit-form",
                                        api = "https://3xsw4ap8wah59.cfc-execute.bj.baidubce.com/api/amis-mock/sample/$id",
                                        body = new object[]
                                        {
                                            new
                                            {
                                                type = "input-text",
                                                name = "engine",
                                                label = "Engine",
                                                required = true
                                            },
                                            new
                                            {
                                                type = "divider"
                                            },
                                            new
                                            {
                                                type = "input-text",
                                                name = "browser",
                                                label = "Browser",
                                                required = true
                                            },
                                            new
                                            {
                                                type = "divider"
                                            },
                                            new
                                            {
                                                type = "input-text",
                                                name = "platform",
                                                label = "Platform(s)",
                                                required = true
                                            },
                                            new
                                            {
                                                type = "divider"
                                            },
                                            new
                                            {
                                                type = "input-text",
                                                name = "version",
                                                label = "Engine version"
                                            },
                                            new
                                            {
                                                type = "divider"
                                            },
                                            new
                                            {
                                                type = "input-text",
                                                name = "grade",
                                                label = "CSS grade"
                                            }
                                        }
                                    }
                                }
                            },
                            new
                            {
                                type = "button",
                                icon = "fa fa-times text-danger",
                                actionType = "ajax",
                                confirmText = "您确认要删除?",
                                api = "delete:/api/sample/$id"
                            }
                        },
                        body = new object[]
                        {
                            new
                            {
                                name = "engine",
                                label = "Rendering engine",
                                labelClassName = "w-sm"
                            },
                            new
                            {
                                type = "hbox",
                                columns = new object[]
                                {
                                    new
                                    {
                                        name = "browser",
                                        label = "Browser",
                                        labelClassName = "w-sm"
                                    },
                                    new
                                    {
                                        name = "platform",
                                        label = "Platform(s)",
                                        labelClassName = "w-sm"
                                    }
                                }
                            },
                            new
                            {
                                name = "version",
                                label = "Engine version",
                                labelClassName = "w-sm"
                            }
                        }
                    }
                }
            }
        };
        return data;
    }

}
