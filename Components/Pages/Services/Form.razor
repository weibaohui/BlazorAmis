@page "/Services/Form"
<Amis Data="GetObj()"></Amis>

@code {

    private object GetObj()
    {
        var data = new
        {
            type = "page",
            title = "动态加载表单中的部分",
            body = new object[]
            {
                "<span class=\"text-danger\">同样通过 <code>service</code>的<code>schemaApi</code> 来加载部分内容，当然也可以全部由它来加载</span>",
                new
                {
                    type = "form",
                    panelClassName = "Panel--info m-t",
                    target = "service1",
                    mode = "horizontal",
                    api = "https://3xsw4ap8wah59.cfc-execute.bj.baidubce.com/api/amis-mock/mock2/form/saveForm?waitSeconds=1",
                    body = new object[]
                    {
                        new
                        {
                            type = "fieldset",
                            title = "基本信息",
                            body = new object[]
                            {
                                new
                                {
                                    type = "input-text",
                                    label = "字段一",
                                    name = "filed1"
                                },
                                new
                                {
                                    type = "input-text",
                                    label = "字段二",
                                    name = "filed2"
                                }
                            }
                        },
                        new
                        {
                            title = "其他信息",
                            type = "fieldset",
                            body = new object[]
                            {
                                new
                                {
                                    name = "tpl",
                                    type = "select",
                                    label = "模板",
                                    inline = true,
                                    required = true,
                                    value = "tpl1",
                                    options = new object[]
                                    {
                                        new
                                        {
                                            label = "模板1",
                                            value = "tpl1"
                                        },
                                        new
                                        {
                                            label = "模板2",
                                            value = "tpl2"
                                        },
                                        new
                                        {
                                            label = "模板3",
                                            value = "tpl3"
                                        }
                                    }
                                },
                                new
                                {
                                    type = "service",
                                    className = "m-t",
                                    initFetchSchemaOn = "data.tpl",
                                    schemaApi = "https://3xsw4ap8wah59.cfc-execute.bj.baidubce.com/api/amis-mock/mock2/service/form?tpl=$tpl"
                                }
                            }
                        }
                    }
                }
            }
        };
        return data;
    }

}
