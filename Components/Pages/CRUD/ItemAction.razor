@page "/CRUD/ItemAction"
<PageTitle>操作交互显示</PageTitle>
<Amis Data="GetObj()"></Amis>

@code {

    private object GetObj()
    {
        var data = new
        {
            title = "点击左侧 crud 会触发右侧 crud 刷新",
            subTitle = "需要配置 syncLocation: false 避免左侧也刷新",
            body = new
            {
                type = "grid",
                columns = new object[]
                {
                    new
                    {
                        md = 6,
                        body = new object[]
                        {
                            new
                            {
                                type = "crud",
                                api = "https://3xsw4ap8wah59.cfc-execute.bj.baidubce.com/api/amis-mock/sample",
                                headerToolbar = new string[] { },
                                perPage = 10,
                                syncLocation = false,
                                itemAction = new
                                {
                                    actionType = "reload",
                                    target = "detailCRUD?id=${id}"
                                },
                                columns = new object[]
                                {
                                    new
                                    {
                                        name = "id",
                                        label = "ID",
                                        width = 30,
                                        type = "text"
                                    },
                                    new
                                    {
                                        name = "platform",
                                        label = "Platform(s)",
                                        type = "text"
                                    }
                                }
                            }
                        }
                    },
                    new
                    {
                        md = 6,
                        body = new object[]
                        {
                            new
                            {
                                type = "crud",
                                name = "detailCRUD",
                                headerToolbar = new string[] { },
                                syncLocation = false,
                                api = "https://3xsw4ap8wah59.cfc-execute.bj.baidubce.com/api/amis-mock/sample?perPage=10&id=${id}&waitSeconds=1",
                                columns = new object[]
                                {
                                    new
                                    {
                                        name = "engine",
                                        label = "Rendering engine",
                                        type = "text"
                                    },
                                    new
                                    {
                                        name = "version",
                                        label = "Engine version",
                                        type = "text"
                                    }
                                }
                            }
                        }
                    }
                }
            }
        };
        return data;
    }

}
